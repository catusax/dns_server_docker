version: '3'

services:
  smartdns:
    restart: always
    image: ghostry/smartdns
    volumes:
      - ./smartdns.conf:/config.conf

  doh:
    restart: always
    image: coolrc/dns-over-https
    volumes:
      - ./doh-server.conf:/doh-server.conf
    user: root

  nginx:
    restart: always
    image: nginx:stable-alpine
    user: root
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - /etc/letsencrypt/live/dns.coolrc.top/fullchain.pem:/ssl/fullchain.pem
      - /etc/letsencrypt/live/dns.coolrc.top/privkey.pem:/ssl/privkey.pem
    ports:
      - "853:853"
      - "443:443"

